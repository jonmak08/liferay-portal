<definition>
	<command name="generateApplicationMetrics">
		<execute macro="Page#openURL">
			<var name="friendlyURL" value="${friendlyURL}" />
			<var name="pageAccess" value="${pageAccess}" />
			<var name="pageAccessURL" value="${pageAccessURL}" />
			<var name="pageStaging" value="${pageStaging}" />
			<var name="pageStagingURL" value="${pageStagingURL}" />
			<var name="siteName" value="${siteName}" />
			<var name="siteNameURL" value="${siteNameURL}" />
			<var name="specificURL" value="${specificURL}" />
			<var name="virtualHostsURL" value="http://localhost:8080" />
		</execute>

		<execute macro="Page#gotoMyDashboard" />

		<execute macro="Page#gotoMyProfile" />

		<execute macro="Page#gotoCP">
			<var name="portletName" value="Liferay Connected Services" />
		</execute>

		<execute macro="LCSPortletNavigator#gotoProjectHome">
			<var name="loginRequired" value="${loginRequired}" />
			<var name="projectName" value="${projectName}" />
			<var name="userEmailAddress" value="${userEmailAddress}" />
			<var name="userEmailPassword" value="${userEmailPassword}" />
		</execute>
	</command>

	<command name="setMetricsTableItemsPerPage">
		<execute function="Click" locator1="LCSServerMetrics#PAGINATION_ITEMS_PER_PAGE" />

		<var name="key_itemsPerPage" value="${itemsPerPage}" />

		<execute function="Click" locator1="LCSServerMetrics#PAGINATION_ITEMS_PER_PAGE_MENU_ITEM" value1="${itemsPerPage}" />
	</command>

	<command name="sortMetricsTable">
		<var name="key_headerName" value="${headerName}" />

		<execute function="Click" locator1="LCSServerMetrics#METRICS_TABLE_SORT_ICON" />
	</command>

	<command name="viewMetricsApplicationCacheHibernateMetrics">
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#APPLICATION_CACHE_HIBERNATE_METRICS_NAME_GENERAL" />
	</command>

	<command name="viewMetricsApplicationCacheLiferaySingleVMMetrics">
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#APPLICATION_CACHE_SINGLE_VM_METRICS_NAME_GENERAL" />
	</command>

	<command name="viewMetricsJVMGarbageCollectorMetrics">
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#JVM_GARBAGE_COLLECTOR_METRICS_TABLE" />
	</command>

	<command name="viewMetricsJVMMemoryMetrics">
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#JVM_MEMORY_METRICS_CHART" />
	</command>

	<command name="viewMetricsServerCurrentThreads">
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#SERVER_CURRENT_THREADS_BAR_CHART" />
	</command>

	<command name="viewMetricsServerJDBCConnectionPools">
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#SERVER_JDBC_CONNECTION_POOLS_BAR_CHART" />
	</command>

	<command name="viewMetricsTableSorted">
		<execute function="AssertTextEquals" locator1="LCSServerMetrics#METRICS_TABLE_ROW_1" value1="${tableItem1}" />
		<execute function="AssertTextEquals" locator1="LCSServerMetrics#METRICS_TABLE_ROW_2" value1="${tableItem2}" />
		<execute function="AssertTextEquals" locator1="LCSServerMetrics#METRICS_TABLE_ROW_3" value1="${tableItem3}" />
	</command>

	<command name="viewSingleMetricApplicationPages">
		<var name="key_pageLink" value="${pageLink}" />

		<execute function="AssertTextEquals" locator1="LCSServerMetrics#APPLICATION_PAGES_PAGE" value1="${pageLink}" />
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#APPLICATION_PAGES_FREQUENCY" />
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#APPLICATION_PAGES_AVERAGE_LOAD_TIME" />
	</command>

	<command name="viewSingleMetricApplicationPagesNotPresent">
		<var name="key_pageLink" value="${pageLink}" />

		<execute function="AssertElementNotPresent" locator1="LCSServerMetrics#APPLICATION_PAGES_PAGE" value1="${pageLink}" />
		<execute function="AssertElementNotPresent" locator1="LCSServerMetrics#APPLICATION_PAGES_FREQUENCY" />
		<execute function="AssertElementNotPresent" locator1="LCSServerMetrics#APPLICATION_PAGES_AVERAGE_LOAD_TIME" />
	</command>

	<command name="viewSingleMetricApplicationPortlets">
		<var name="key_portletName" value="${portletName}" />

		<execute function="AssertTextEquals" locator1="LCSServerMetrics#APPLICATION_PORTLETS_NAME" value1="${key_portletName}" />
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#APPLICATION_PORTLETS_FREQUENCY" />
		<execute function="AssertElementPresent" locator1="LCSServerMetrics#APPLICATION_PORTLETS_AVERAGE_LOAD_TIME" />
	</command>

	<command name="viewSingleMetricApplicationPortletsNotPresent">
		<var name="key_portletName" value="${portletName}" />

		<execute function="AssertElementNotPresent" locator1="LCSServerMetrics#APPLICATION_PORTLETS_NAME" value1="${key_portletName}" />
		<execute function="AssertElementNotPresent" locator1="LCSServerMetrics#APPLICATION_PORTLETS_FREQUENCY" />
		<execute function="AssertElementNotPresent" locator1="LCSServerMetrics#APPLICATION_PORTLETS_AVERAGE_LOAD_TIME" />
	</command>

	<command name="waitForMetrics">
		<var name="i" value="1" />

		<while>
			<not>
				<or>
					<or>
						<condition function="IsElementNotPresent" locator1="LCSServerMetrics#SERVER_STATUS_ALERT_MESSAGE" />
						<condition function="IsElementNotPresent" locator1="LCSServerMetrics#INFO_MESSAGE" />
					</or>
					<equals arg1="${i}" arg2="3" />
				</or>
			</not>
			<then>
				<var method="MathUtil#sum('${i}', '1')" name="i" />

				<echo message="The Server Metrics could not be found. Refreshing the page. Attempt number ${i}..." />

				<execute function="Refresh" />
			</then>
		</while>
	</command>
</definition>