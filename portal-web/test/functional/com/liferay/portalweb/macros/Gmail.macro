<definition>
	<command name="backtoInbox">
		<execute action="Gmail#assertClick" locator1="GMAIL_HTML_MODE_BACK_TO_INBOX_LINK" value1="Â« Back to Inbox" />
	</command>

	<command name="gotoHtmlMode">
		<execute function="#open" locator1="https://mail.google.com/mail/?ui=html&amp;zy=h" />

		<execute function="#pause" locator1="5000" />
	</command>

	<command name="login">
		<execute function="#open" locator1="http://www.gmail.com" />
		<execute function="#pause" locator1="5000" />

		<var name="key_userEmailAddress" value="${userEmailAddress}" />

		<if>
			<and>
				<condition action="Gmail#isElementNotPresent" locator1="GMAIL_NORMAL_MODE_USER_SCREENNAME" />
				<condition action="Gmail#isElementNotPresent" locator1="GMAIL_HTML_MODE_USER_SCREENNAME" />
			</and>
			<then>
				<if>
					<condition action="Gmail#isElementPresent" locator1="LOGIN_EMAIL_FIELD" />
					<then>
						<execute action="Gmail#type" locator1="LOGIN_EMAIL_FIELD" value1="${userEmailAddress}" />
					</then>
				</if>

				<execute action="Gmail#type" locator1="LOGIN_PASSWORD_FIELD" value1="${userPassword}" />
				<execute action="Gmail#check" locator1="LOGIN_STAY_SIGNED_IN_CHECKBOX" />
				<execute action="Gmail#click" locator1="LOGIN_SIGN_IN_BUTTON" />
				<execute function="#pause" locator1="5000" />
			</then>
			<elseif>
				<condition action="Gmail#isElementPresent" locator1="GMAIL_HTML_MODE_USER_SCREENNAME" />
				<then>
					<execute action="Gmail#assertElementPresent" locator1="GMAIL_HTML_MODE_USER_SCREENNAME" />
				</then>
			</elseif>
			<else>
				<execute action="Gmail#assertElementPresent" locator1="GMAIL_NORMAL_MODE_USER_SCREENNAME" />
			</else>
		</if>
	</command>

	<command name="logoutAndLogin">
		<execute function="#open" locator1="http://www.gmail.com" />
		<execute function="#pause" locator1="3000" />

		<execute macro="Gmail#gotoHtmlMode" />

		<execute action="Gmail#click" locator1="GMAIL_HTML_MODE_SIGN_OUT" />

		<if>
			<condition action="Gmail#isElementPresent" locator1="SIGN_IN_WITH_DIFFERENT_ACCOUNT" />
			<then>
				<execute action="Gmail#assertClick" locator1="SIGN_IN_WITH_DIFFERENT_ACCOUNT" value1="Sign in with a different account" />
				<execute action="Gmail#assertClick" locator1="ADD_ACCOUNT_BUTTON" value1="Add account" />
			</then>
			<elseif>
				<condition action="Gmail#isElementPresent" locator1="ADD_ACCOUNT_BUTTON" />
				<then>
					<execute action="Gmail#assertClick" locator1="ADD_ACCOUNT_BUTTON" value1="Add account" />
				</then>
			</elseif>
		</if>

		<execute action="Gmail#type" locator1="LOGIN_EMAIL_FIELD" value1="${userEmailAddress}" />
		<execute action="Gmail#type" locator1="LOGIN_PASSWORD_FIELD" value1="${userPassword}" />
		<execute action="Gmail#check" locator1="LOGIN_STAY_SIGNED_IN_CHECKBOX" />
		<execute action="Gmail#click" locator1="LOGIN_SIGN_IN_BUTTON" />
		<execute function="#pause" locator1="5000" />
	</command>

	<command name="selectWindowKBSuggestionReceived">
		<var name="key_pageTitle" value="Gmail - We have received your suggestion for article ${kbArticleTitle}" />
		<execute action="Gmail#selectWindow" locator1="PAGE_TITLE" />
	</command>

	<command name="selectWindowKBSuggestionResolved">
		<var name="key_pageTitle" value="Gmail - We have resolved your suggestion for article ${kbArticleTitle}" />
		<execute action="Gmail#selectWindow" locator1="PAGE_TITLE" />
	</command>

	<command name="selectWindowKBSuggestionReviewing">
		<var name="key_pageTitle" value="Gmail - We are reviewing your suggestion for article ${kbArticleTitle}" />
		<execute action="Gmail#selectWindow" locator1="PAGE_TITLE" />
	</command>

	<command name="tearDown">
		<execute macro="Gmail#login">
			<var name="userEmailAddress" value="${userEmailAddress}" />
			<var name="userPassword" value="${userPassword}" />
		</execute>

		<execute macro="Gmail#gotoHtmlMode" />

		<while>
			<condition action="Gmail#isElementPresent" locator1="GMAIL_HTML_MODE_MAIL_TABLE_GENERIC" />
			<then>
				<execute action="Gmail#check" locator1="GMAIL_HTML_MODE_MAIL_TABLE_GENERIC" />
				<execute action="Gmail#click" locator1="GMAIL_HTML_MODE_MAIL_TABLE_DELETE_BUTTON" />
				<execute function="#pause" locator1="3000" />
			</then>
		</while>
	</command>

	<command name="viewMail">
		<var name="key_gmailAssetType" value="${gmailAssetType}" />

		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MAIL_TABLE_USER_NAME" value1="${emailFromUserName}" />
		<execute action="Gmail#assertClick" locator1="GMAIL_HTML_MODE_MAIL_TABLE_MESSAGE_TITLE" value1="${gmailMessageTitle}" />
		<execute function="#pause" locator1="3000" />

		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_TITLE" value1="${gmailMessageTitle}" />
		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_GREETING" value1="${gmailMessageBody}" />
		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY" value1="${gmailMessageBody}" />
		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_CLOSING" value1="${gmailMessageBody}" />

		<if>
			<isset var="gmailMesssageAttachment" />
			<then>
				<var name="key_gmailMesssageAttachment" value="${gmailMesssageAttachment}" />

				<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_ATTACHMENT" value1="${gmailMesssageAttachment}" />
			</then>
		</if>
	</command>

	<command name="viewMailNotPresent">
		<var name="key_gmailAssetType" value="${gmailAssetType}" />

		<execute action="Gmail#assertElementNotPresent" locator1="GMAIL_HTML_MODE_MAIL_TABLE_MESSAGE_TITLE" />
	</command>

	<command name="viewMultipleMail">
		<var name="key_gmailAssetType" value="${gmailAssetType}" />

		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MAIL_TABLE_USER_NAME" value1="${emailFromUserName}" />
		<execute action="Gmail#assertClick" locator1="GMAIL_HTML_MODE_MAIL_TABLE_MESSAGE_TITLE_${number}" value1="${gmailMessageTitle}" />
		<execute function="#pause" locator1="3000" />
		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_TITLE" value1="${gmailMessageTitleInside}" />

		<if>
			<isset var="gmailKBArticleDate" />
			<then>
				<if>
					<isset var="gmailMessageKBArticleURL" />
					<then>
						<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_ARTICLE_DATE" value1="${gmailKBArticleDate} Article Link" />
					</then>
					<else>
						<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_ARTICLE_DATE" value1="${gmailKBArticleDate}" />
					</else>
				</if>
			</then>
		</if>

		<if>
			<equals arg1="${gmailMessageKBArticleURL}" arg2="true" />
			<then>
				<var name="key_kbArticleTitle" value="${kbArticleTitle}" />
				<var name="key_pageName" value="${pageName} - Liferay" />

				<execute action="Gmail#assertClick" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_KB_URL" value1="Article Link" />
				<execute function="#pause" locator1="3000" />

				<execute action="PGKnowledgebasedisplay#selectWindow" locator1="PAGE_TITLE" />

				<execute macro="KBArticle#viewPGViaKBDisplay">
					<var name="kbArticleContent" value="${kbArticleContent}" />
					<var name="kbArticleTitle" value="${kbArticleTitle}" />
				</execute>

				<execute action="PGKnowledgebasedisplay#close" locator1="PAGE_TITLE" />
			</then>
		</if>
	</command>

	<command name="viewSocialOfficeMessageMail">
		<execute action="Gmail#assertClick" locator1="GMAIL_HTML_MODE_MAIL_TABLE_MESSAGE_TITLE_SOCIAL_OFFICE_MESSAGE" value1="${senderName} sent you a message on Liferay" />
		<execute function="#pause" locator1="3000" />

		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_SOCIAL_OFFICE_MESSAGE_SUMMARY" value1="${senderName} sent you a message." />
		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_SOCIAL_OFFICE_MESSAGE_SUBJECT" value1="${messageSubject}" />
		<execute action="Gmail#assertTextEquals" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_SOCIAL_OFFICE_MESSAGE_BODY" value1="${messageBody}" />
		<execute action="Gmail#click" locator1="GMAIL_HTML_MODE_MESSAGE_BODY_SOCIAL_OFFICE_MESSAGE_LINK" />

		<execute action="SOMessages#selectWindow" locator1="MESSAGES_POP_UP_WINDOW" />

		<if>
			<isset var="partialMessageBody" />
			<then>
				<var name="key_messageBody" value="${partialMessageBody}" />
			</then>
			<else>
				<var name="key_messageBody" value="${messageBody}" />
			</else>
		</if>

		<execute action="SOMessagesMessage#assertTextEquals" locator1="PRIVATE_MESSAGE_SUBJECT" value1="${messageSubject}" />

		<execute macro="SOMessages#viewMessageConnectionDetailsView" />

		<execute action="SOMessagesMessage#assertTextEquals" locator1="PRIVATE_MESSAGE_SENDER" value1="${senderName}" />
		<execute action="SOMessagesMessage#assertTextEquals" locator1="PRIVATE_MESSAGE_BODY" value1="${messageBody}" />

		<if>
			<isset var="messageAttachmentFile" />
			<then>
				<execute action="SOMessagesMessage#assertElementPresent" locator1="PRIVATE_MESSAGE_ATTACHMENT" />
				<execute action="SOMessagesMessage#assertTextEquals" locator1="PRIVATE_MESSAGE_ATTACHMENT_LINK" value1="${messageAttachmentFile}" />
			</then>
		</if>

		<execute action="SOMessages#close" locator1="MESSAGES_POP_UP_WINDOW" />
	</command>
</definition>