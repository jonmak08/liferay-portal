<definition component-name="portal-user-management-and-portal-configuration">
	<property name="portal.release" value="true" />
	<property name="testray.main.component.name" value="Administration" />

	<set-up>
		<execute macro="User#firstLoginPG" />
	</set-up>

	<tear-down>
		<execute macro="User#firstLoginPG" />

		<execute macro="Role#tearDownCP" />
	</tear-down>

	<command name="ViewAutomaticAssignedRoles" priority="5">
		<execute macro="Page#gotoCP">
			<var name="portletName" value="Roles" />
		</execute>

		<execute macro="Role#addCP">
			<var name="roleName" value="Roles Regrole Name" />
		</execute>

		<execute macro="Page#gotoCP">
			<var name="portletName" value="Roles" />
		</execute>

		<execute macro="Role#definePermissionCP">
			<var name="permissionDefinitionKey" value="CONTROL_PANEL_USERS_USERS_AND_ORGANIZATIONS_ACCESS_IN_CONTROL_PANEL" />
			<var name="permissionDefinitionValue" value="Access in Control Panel" />
			<var name="permissionNavigationKey" value="CONTROL_PANEL_USERS_USERS_AND_ORGANIZATIONS" />
			<var name="permissionNavigationValue" value="Users and Organizations" />
			<var name="roleName" value="Roles Regrole Name" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Go to Control Panel" />
			<var name="permissionNavigationValue" value="Portal" />
		</execute>

		<execute macro="Page#gotoCP">
			<var name="portletName" value="Roles" />
		</execute>

		<execute macro="Role#definePermissionCP">
			<var name="permissionDefinitionKey" value="SITE_ADMIN_PAGES_SITE_PAGES_GENERAL_ACCESS_IN_SITE_ADMINISTRATION" />
			<var name="permissionDefinitionValue" value="Access in Site Administration" />
			<var name="permissionNavigationKey" value="SITE_ADMIN_PAGES_SITE_PAGES" />
			<var name="permissionNavigationValue" value="Site Pages" />
			<var name="roleName" value="Roles Regrole Name" />
		</execute>

		<execute macro="Role#viewPermissionCP">
			<var name="permissionDefinitionValue" value="Go to Site Administration" />
			<var name="permissionNavigationValue" value="Sites > Site" />
		</execute>
	</command>

	<command name="ViewDocumentsAndMediaAddRepositoryPermissionSiteMemberRole" priority="5">
		<execute macro="Page#gotoCP">
			<var name="portletName" value="Roles" />
		</execute>

		<execute macro="Role#definePermissionCP">
			<var name="permissionDefinitionKey" value="SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_DOCUMENTS_ADD_REPOSITORY" />
			<var name="permissionDefinitionValue" value="Add Repository" />
			<var name="permissionNavigationKey" value="SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA" />
			<var name="permissionNavigationValue" value="Documents and Media" />
			<var name="roleName" value="Site Member" />
		</execute>

		<execute function="AssertTextNotPresent" value1="action.ADD_REPOSITORY" />

		<execute macro="Page#gotoCP">
			<var name="portletName" value="Roles" />
		</execute>

		<execute macro="Role#removePermissionCP">
			<var name="permissionDefinitionKey" value="SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA_DOCUMENTS_ADD_REPOSITORY" />
			<var name="permissionDefinitionValue" value="Add Repository" />
			<var name="permissionNavigationKey" value="SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA" />
			<var name="permissionNavigationValue" value="Documents and Media" />
			<var name="roleName" value="Site Member" />
		</execute>
	</command>
</definition>